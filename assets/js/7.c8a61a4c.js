(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{491:function(t,s,a){t.exports=a.p+"assets/img/cover.e54908b3.jpg"},492:function(t,s,a){t.exports=a.p+"assets/img/1.1577aab1.jpg"},493:function(t,s,a){t.exports=a.p+"assets/img/2.7071b215.jpg"},494:function(t,s,a){t.exports=a.p+"assets/img/3.1e31f230.jpg"},495:function(t,s,a){t.exports=a.p+"assets/img/4.83049ee1.jpg"},496:function(t,s,a){t.exports=a.p+"assets/img/5.8bfe16c0.jpg"},553:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("近期一直在搞Pixiv相关的东西，也拿到了"),n("a",{attrs:{href:"https://yojigen.tech/archives/pivisionm.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pivision"),n("OutboundLink")],1),t._v("的原作者reiya的正式授权，成了新的维护者。于是一个又一个的问题摆在我面前，我必须要把她们一个一个推倒。\n目前比较棘手的问题是：如何注册账号。实际上解决办法也很简单，反带P站就完事了。但这会出现另一个严重的问题：反带了P站，大量的图片会让我的小服务器吃不消。这时候，我发现了Cloudflare Workers。")]),t._v(" "),n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),n("p",[n("img",{attrs:{src:a(491),alt:""}})]),t._v(" "),n("p",[t._v("Cloudflare提供了免费的额度，每天10万次请求而不计算流量，简直就是用来反带的神器！")]),t._v(" "),n("h2",{attrs:{id:"教程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#教程"}},[t._v("#")]),t._v(" 教程")]),t._v(" "),n("h3",{attrs:{id:"_1-前提准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-前提准备"}},[t._v("#")]),t._v(" 1. 前提准备")]),t._v(" "),n("ul",[n("li",[t._v("一个域名")]),t._v(" "),n("li",[t._v("域名要使用Cloudflare的NS解析")])]),t._v(" "),n("h3",{attrs:{id:"_2-步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-步骤"}},[t._v("#")]),t._v(" 2. 步骤")]),t._v(" "),n("p",[t._v("首先注册一个Cloudflare账号（估计大多数人都有），之后把你的域名使用Cloudflare解析（这个过程我觉得没必要详细讲了……）")]),t._v(" "),n("p",[n("img",{attrs:{src:a(492),alt:""}})]),t._v(" "),n("p",[t._v("然后打开你的域名管理页面，点击上面的Workers，再点击Launch Editor，进入脚本编辑器。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(493),alt:""}})]),t._v(" "),n("p",[t._v("在编辑器中，点击左侧的Add script，之后输入脚本的名称，随便填一个"),n("code",[t._v("pximg")]),t._v("就好，之后点击Confirm创建脚本。")]),t._v(" "),n("p",[t._v("之后左侧会多出来一个脚本，点进去开始编辑。")]),t._v(" "),n("p",[t._v("删除掉里面所有的代码，粘贴下面的代码进去。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fetch"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hostname "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"i.pximg.net"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" request "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Request")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("respondWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      headers"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Referer'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.pixiv.net/'")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[n("img",{attrs:{src:a(494),alt:""}})]),t._v(" "),n("p",[t._v("就像这样，然后点击save保存脚本。然后点击左上角的Dashboard返回域名面板。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(495),alt:""}})]),t._v(" "),n("p",[t._v("之后点击Add route，填写"),n("code",[t._v("https://你的域名/*")]),t._v("，并且下面选择刚刚创建的脚本，举例如图。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(496),alt:""}})]),t._v(" "),n("p",[t._v("再之后点击"),n("code",[t._v("new Workers dashboard")]),t._v("，根据提示创建一个二级域名。例如我的二级域名是"),n("code",[t._v("4cy.workers.dev")]),t._v("，而刚刚创建的脚本的域名就是"),n("code",[t._v("pximg.4cy.workers.dev")]),t._v("。")]),t._v(" "),n("p",[t._v("最后一步，到DNS页面，添加一个CNAME记录到你的脚本域名下，并开启云加速。")]),t._v(" "),n("p",[t._v("至此，你就可以使用你的域名来作为Pixiv的图片反向代理了。")])])}),[],!1,null,null,null);s.default=e.exports}}]);